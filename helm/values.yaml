# Default values for status-tacos
# This is a YAML-formatted file.

global:
  imageRegistry: registry.oglimmer.com

# Image pull secrets
imagePullSecrets:
  - name: oglimmerregistrykey

# Frontend configuration
frontend:
  image:
    repository: status-tacos-frontend
    tag: latest
    pullPolicy: Always

  replicaCount: 2

  service:
    type: ClusterIP
    port: 8080
    targetPort: 8080

  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi

  autoscaling:
    enabled: false
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 80

# Backend configuration
backend:
  image:
    repository: status-tacos-backend
    tag: latest
    pullPolicy: Always

  replicaCount: 2

  service:
    type: ClusterIP
    port: 8080
    targetPort: 8080

  resources:
    limits:
      cpu: 1
      memory: 3Gi
    requests:
      cpu: 250m
      memory: 1536Mi

  autoscaling:
    enabled: false
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 80

  env:
    springProfilesActive: prod

  # Email configuration
  email:
    enabled: false
    smtp:
      host: "192.168.178.52"
      port: 25
      username: ""
      password: ""
      auth: false
      starttls:
        enable: false
        required: false
    from: "mail@olikurt.de"
    subjectPrefix: "[Status Tacos]"

  # Health check configuration
  livenessProbe:
    httpGet:
      path: /api/actuator/health
      port: 8080
    initialDelaySeconds: 300
    periodSeconds: 30
    timeoutSeconds: 60
    failureThreshold: 10

  readinessProbe:
    httpGet:
      path: /api/actuator/health
      port: 8080
    initialDelaySeconds: 180
    periodSeconds: 15
    timeoutSeconds: 10
    failureThreshold: 6

# External database configuration
# Note: Database password must be provided via a SealedSecret
# See helm/sealed-secret-example.yaml for instructions
database:
  host: "mariadb"
  port: 3306
  name: "status-tacos"
  username: "status-tacos"

# Ingress configuration
ingress:
  enabled: true
  className: ""
  annotations: {}
  certManager:
    enabled: true
    clusterIssuer: "oglimmer-com-dns"
  hosts:
    - host: tacos.oglimmer.com
      paths:
        - path: /
          pathType: Prefix
          service: frontend
        - path: /api
          pathType: Prefix
          service: backend
  tls:
    enabled: true
    secretName: "tls-status-tacos-ingress-dns"
    hosts:
      - "tacos.oglimmer.com"

# Container security context
securityContext:
  runAsNonRoot: true
  runAsUser: 1001

# Pod security context
podSecurityContext:
  fsGroup: 1001

# Service account
serviceAccount:
  create: true
  annotations: {}
  name: ""

# Node selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity
affinity: {}

# Pod disruption budget
podDisruptionBudget:
  enabled: false
  minAvailable: 1
